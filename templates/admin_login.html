{% extends "base.html" %}
{% block title %}Admin Login{% endblock %}

{% block head %}
<style>
  .shake { animation: shake 0.4s ease; }
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    20%, 60%  { transform: translateX(-6px); }
    40%, 80%  { transform: translateX(6px); }
  }
</style>
{% endblock %}

{% block content %}
<div class="flex-1 flex items-center justify-center px-6 py-20">
  <div class="w-full max-w-md">

    {# â”€â”€ Icon + title â”€â”€ #}
    <div class="text-center mb-10">
      <div class="inline-flex items-center justify-center w-16 h-16 bg-amber-100 rounded-full mb-5">
        <span class="text-3xl">ğŸ”</span>
      </div>
      <h1 class="font-serif text-3xl text-stone-900 mb-1">Admin Login</h1>
      <p class="text-stone-400 text-sm">Manage cafe listings and moderate submissions.</p>
    </div>

    {# â”€â”€ Form card â”€â”€ #}
    <form method="POST" action="{{ url_for('admin_login') }}" novalidate
          class="bg-white rounded-2xl border border-stone-200 shadow-sm p-8 space-y-5
                 {% for cat, msg in get_flashed_messages(with_categories=true) %}{% if cat == 'danger' %}shake{% endif %}{% endfor %}">
      {{ form.hidden_tag() }}

      <div>
        <label for="{{ form.username.id }}" class="block text-xs font-semibold text-stone-500 uppercase tracking-wide mb-2">
          Username
        </label>
        {{ form.username(class="form-input", placeholder="admin", autocomplete="username") }}
        {% for err in form.username.errors %}
          <p class="text-red-500 text-xs mt-1">{{ err }}</p>
        {% endfor %}
      </div>

      <div>
        <label for="{{ form.password.id }}" class="block text-xs font-semibold text-stone-500 uppercase tracking-wide mb-2">
          Password
        </label>
        <div class="relative">
          {{ form.password(id="password-field", class="form-input pr-10", placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢", autocomplete="current-password") }}
          <button type="button" id="toggle-pw"
                  class="absolute right-3 top-1/2 -translate-y-1/2 text-stone-400 hover:text-stone-600 text-sm"
                  aria-label="Toggle password visibility">
            ğŸ‘
          </button>
        </div>
        {% for err in form.password.errors %}
          <p class="text-red-500 text-xs mt-1">{{ err }}</p>
        {% endfor %}
      </div>

      {{ form.submit(class="w-full bg-amber-800 hover:bg-amber-900 text-amber-50 py-3 rounded-full font-semibold text-sm tracking-wide transition-colors cursor-pointer mt-2") }}

    </form>

    <p class="text-center text-xs text-stone-400 mt-6">
      Not an admin? <a href="{{ url_for('index') }}" class="text-amber-700 hover:underline">Back to browse</a>
    </p>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  document.getElementById('toggle-pw').addEventListener('click', function () {
    const field = document.getElementById('password-field');
    field.type = field.type === 'password' ? 'text' : 'password';
  });
</script>
{% endblock %}
